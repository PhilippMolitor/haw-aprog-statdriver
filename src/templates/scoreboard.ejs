<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title><%= details.game %>/<%= details.scoreboard %> - StatDriver</title>
    <link rel="stylesheet" type="text/css" href="/assets/css/common.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/scoreboard.css">
</head>
<body>

<div id="top">
    <div class="logo">StatDriver</div>
    <div id="menu">
        <a href="/profile" class="bmenu profile">profile</a>
        <a href="/dashboard/new-game" class="bmenu newgame">new game</a>
        <a href="/auth/logout" class="bmenu logout">logout</a>
    </div>
</div>
<div id="wrapperh">
    <div class="space"></div>
    <div id="rect">
        <div id="one">
            <div class="oneinf">
                <h1>Game:
                    <%= details.game %>
                </h1>
                <h1>Scoreboard:
                    <%= details.scoreboard %>
                </h1>
            </div>

            <div id="onemenu">
                <a href="/game/<%= details.gameId %>" class="onemenu all">all scoreboards</a>
                <a href="/game/<%= details.gameId %>/new-scoreboard" class="onemenu new">new scoreboard</a>
            </div>
        </div>

        <div id="two">
            <div class="twotitle">
                <h1>Settings:</h1>
            </div>
            <form method="post">

                <div id="twochanges">

                    <div id="twochanges1">
                        <h2>Change scoreboard name</h2>
                        <input class="twoti" type="text" name="newName" value="<%= details.scoreboard %>">
                    </div>

                    <div id="twochanges2">
                        <h2>Change embed name</h2>
                        <input class="twoti" type="text" name="embedTitle" value="<%= details.embedTitle %>">
                    </div>

                    <div id="twochanges3">
                        <h2>Enable/disable embed</h2>
                        <input type="checkbox" name="enableEmbed" <%= details.embedEnabled == 1 ? 'checked' : '' %>
                               value="1">
                    </div>

                    <div id="twochanges4">
                        <input class="savebutton" type="submit" value="save changes">
                    </div>

                </div>
            </form>

        </div>

        <div id="three">
            <div class="threetitle">
                <h1>Filter:</h1>
            </div>

            <form method="get">
                <div id="threefilters">
                    <h2>Maximum Entries Displayed</h2>
                    <input class="filter" type="number" name="maxEntries" value="<%= details.maxEntriesParsed %>">
                    <h2>Past Days Stats</h2>
                    <input class="filter" type="number" name="pastDays" value="<%= details.pastDaysParsed %>">
                    <h2>Filter by name</h2>
                    <input class="filter" type="text" name="scoreNameFilter" value="<%= details.scoreNameFilter %>">
                    <br>
                    <input class="apply" type="submit" value="apply">
                </div>
            </form>
        </div>


        <div id="four">

            <div class="fourtitle"><h1 style="color: red;">Danger Zone:</h1></div>

            <form method="post">
                <div id="four1">
                    <h2>Reset API keys</h2>
                    <input class="dangerbutton done" type="submit" name="resetApiKeys" value="y tho">
                </div>
            </form>

            <form method="post">
                <div id="four2">
                    <h2>Clear score entries</h2>
                    <input class="dangerbutton dtwo" type="submit" name="clearEntries" value="Kill 'em all!">
                </div>
            </form>
        </div>


        <div id="table">
            <div class="fivetitle"><h1>Scoreboard:</h1></div>
            <table class="scores">
                <thead>
                <tr>
                    <td class="align-r">rank</td>
                    <td class="align-l">player</td>
                    <td class="align-r">score</td>
                    <td class="align-l">time of record</td>
                    <td class="align-l">actions</td>
                </tr>
                </thead>
                <tbody>

                <% let rank = 1; for (let e of entries) { %>
                    <tr>
                        <td class="align-r"><%= rank %></td>
                        <td class="align-l"><%= e.name %></td>
                        <td class="align-r"><%= e.score %></td>
                        <td class="align-l"><%= new Date(e.timestamp * 1000).toLocaleString('de-DE') %></td>
                        <td>
                            <form method="post">
                                <input type="hidden" name="deleteEntry" value="<%= e.id %>">
                                <input class="tbutton" type="submit" value="x">
                            </form>
                        </td>
                    </tr>
                <% rank++; } %>
                </tbody>
            </table>

            <div id="boxes">
                <div class="box bone"></div>
                <div class="box btwo"></div>
            </div>
        </div>
    </div>
    <div class="space"></div>
</div>

</body>
</html>